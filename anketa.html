<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–æ—Ä–º–∞ –∞–Ω–∫–µ—Ç—ã</title>
    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã */
        #anketa {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #f9f9f9;
        }
        #anketaForm label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }
        #anketaForm input, #anketaForm textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        #anketaForm button {
            display: block;
            width: 100%;
            padding: 10px;
            margin-top: 20px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #anketaForm button:hover {
            background-color: #218838;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞ */
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: #f1f1f1;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            border-radius: 10px;
            text-align: center;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .popup button {
            margin-top: 10px;
            padding: 8px 16px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .popup button:hover {
            background-color: #218838;
        }
        body{
            background-color: rgb(255, 211, 95);
        }
    </style>
</head>
<body>

    <div id="anketa">
        <form id="anketaForm">
            <h1>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É –¥–ª—è –∑–∞–∫–∞–∑–∞</h1><br>
            <label for="firstName">–ò–º—è:</label>
            <input type="text" id="firstName" name="firstName" required><br><br>

            <label for="lastName">–§–∞–º–∏–ª–∏—è:</label>
            <input type="text" id="lastName" name="lastName" required><br><br>

            <label for="product">–í—ã–±—Ä–∞–Ω–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ:</label>
            <input type="text" id="product" name="product" required><br><br>

            <label for="color">–¶–≤–µ—Ç –∏–∑–¥–µ–ª–∏—è:</label>
            <input id="color" name="color" ></input><br><br>

            <label for="date">–î–∞—Ç–∞:</label>
            <p>–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –æ—Ç 7 –¥–Ω–µ–π</p>
            <input type="date" id="date" name="date" required><br><br>

            <label for="pay">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</label>
            <input type="text" id="pay" name="pay" required><br><br>

            <label for="road">–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
            <input type="text" id="road" name="road" required><br><br>

            <label for="comments">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</label>
            <input id="comments" name="comments"></input><br><br>

            <label for="telegram">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–≤—è–∑–∏ (Telegram):</label>
            <input id="telegram" name="telegram"></input><br><br>

            <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </form>
    </div>

    <div id="overlay" class="overlay"></div>
    <div id="popup" class="popup">
        <p>–í–∞—à–∞ –∞–Ω–∫–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞.</p>
        <button onclick="closePopup()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
  const currentDate = new Date();
  
  // –î–æ–±–∞–≤–ª—è–µ–º 5 –¥–Ω–µ–π –∫ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–µ
  currentDate.setDate(currentDate.getDate() + 7);
  
  // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç YYYY-MM-DD
  const minDate = currentDate.toISOString().split('T')[0];
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É –¥–ª—è input
  document.getElementById('date').setAttribute('min', minDate);
        const BOT_TOKEN = "7199956001:AAEzBsFrdrTeNsEXu93gwSkiEKo6jjb4tXE"; // –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
        const CHAT_ID = "1931377774"; // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ

        document.getElementById('anketaForm').addEventListener('submit', function(event) {
            event.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã
            if (this.checkValidity()) {
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã
                const firstName = document.getElementById('firstName').value;
                const lastName = document.getElementById('lastName').value;
                const product = document.getElementById('product').value;
                const color = document.getElementById('color').value;
                const date = document.getElementById('date').value;
                const pay = document.getElementById('pay').value;
                const road = document.getElementById('road').value;
                const comments = document.getElementById('comments').value;
                const telegram = document.getElementById('telegram').value;

                // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ HTML
                const message = `
üì© –í–∞–º –Ω–æ–≤–∞—è –∑–∞—è–≤–∫–∞:
<b>–ò–º—è:</b> ${firstName}
<b>–§–∞–º–∏–ª–∏—è:</b> ${lastName}
<b>–í—ã–±—Ä–∞–Ω–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ:</b> ${product}
<b>–¶–≤–µ—Ç –∏–∑–¥–µ–ª–∏—è:</b> ${color || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}
<b>–î–∞—Ç–∞:</b> ${date}
<b>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</b> ${pay}
<b>–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏:</b> ${road}
<b>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</b> ${comments || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}
<b>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–≤—è–∑–∏ (Telegram):</b> ${telegram}
                `;

                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram
                sendToTelegram(message).then(() => {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º popup –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
                    document.getElementById('overlay').style.display = 'block';
                    document.getElementById('popup').style.display = 'block';
                }).catch((error) => {
                    console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:", error);
                    alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã.");
                });
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram
        async function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            const params = {
                chat_id: CHAT_ID,
                text: message,
                parse_mode: "HTML"
            };

            const response = await fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(params)
            });

            if (!response.ok) {
                throw new Error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è");
            }

            return response.json();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è popup
        function closePopup() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('popup').style.display = 'none';
        }
    </script>

</body>
</html>